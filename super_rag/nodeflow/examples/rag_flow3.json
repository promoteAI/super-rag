{
  "id": "rag-flow-v1",
  "name": "rag_flow",
  "title": "RAG Knowledge Base Flow",
  "description": "A typical RAG flow with parallel retrieval and reranking",
  "version": "1.0.0",
  "tags": ["rag", "query", "retrieval", "rerank", "llm"],
  "graph": {
    "edges": [
      {
        "id": "e-start-vs",
        "source": "start",
        "sourceHandle": "query",
        "target": "vector_search_3f8e2c1a",
        "targetHandle": "query",
        "ui_properties": { "className": "str" }
      },
      {
        "id": "e-vs-merge",
        "source": "vector_search_3f8e2c1a",
        "sourceHandle": "docs",
        "target": "merge_1a9c5d8e",
        "targetHandle": "vector_search_docs",
        "ui_properties": { "className": "array" }
      },
      {
        "id": "e-merge-rerank",
        "source": "merge_1a9c5d8e",
        "sourceHandle": "docs",
        "target": "rerank_5c7e1b2a",
        "targetHandle": "docs",
        "ui_properties": { "className": "array" }
      },
      {
        "id": "e-rerank-llm",
        "source": "rerank_5c7e1b2a",
        "sourceHandle": "docs",
        "target": "llm_8e4f2a7b",
        "targetHandle": "docs",
        "ui_properties": { "className": "array" }
      },
      {
        "id": "e-start-llm",
        "source": "start",
        "sourceHandle": "query",
        "target": "llm_8e4f2a7b",
        "targetHandle": "query",
        "ui_properties": { "className": "str" }
      }
    ],
    "nodes": [
      {
        "id": "start",
        "type": "start",
        "data": {
          "name": "query",
          "value": "hello"
        },
        "ui_properties": {
          "position": { "x": 0, "y": 0 },
          "width": 280
        }
      },
      {
        "id": "vector_search_3f8e2c1a",
        "type": "vector_search",
        "data": {
          "name": "Vector Search",
          "top_k": 5,
          "similarity_threshold": 0.7,
          "collection_ids": []
        },
        "ui_properties": {
          "position": { "x": 320, "y": 0 },
          "width": 280
        }
      },
      {
        "id": "merge_1a9c5d8e",
        "type": "merge",
        "data": {
          "name": "Merge Results",
          "merge_strategy": "union",
          "deduplicate": true
        },
        "ui_properties": {
          "position": { "x": 640, "y": 0 },
          "width": 280
        }
      },
      {
        "id": "rerank_5c7e1b2a",
        "type": "rerank",
        "data": {
          "name": "Rerank Results",
          "model": "bge-reranker",
          "model_service_provider": "openai",
          "custom_llm_provider": "openai"
        },
        "ui_properties": {
          "position": { "x": 960, "y": 0 },
          "width": 280
        }
      },
      {
        "id": "llm_8e4f2a7b",
        "type": "llm",
        "data": {
          "name": "LLM Generation",
          "model_service_provider": "openai",
          "model_name": "THUDM/glm-4-9b-chat",
          "custom_llm_provider": "openai",
          "prompt_template": "{context}\n{query}",
          "temperature": 0.7
        },
        "ui_properties": {
          "position": { "x": 1280, "y": 0 },
          "width": 280
        }
      }
    ]
  },
  "input_schema": {
    "type": "object",
    "properties": {
      "query": {
        "type": "string",
        "description": "User's question or query",
        "default": "hello"
      }
    },
    "required": ["query"]
  },
  "output_schema": {
    "type": "object",
    "properties": {
      "text": {
        "type": "string",
        "description": "Text generated by LLM"
      }
    },
    "required": []
  }
}
